{"title":"CentOS & WordPress","date":"2023-04-06T17:50:20.000Z","date_formatted":{"ll":"Apr 6, 2023","L":"04/06/2023","MM-DD":"04-06"},"link":"posts/centos&wordpress","comments":true,"tags":["WordPress"],"categories":["WordPress"],"updated":"2023-04-06T17:50:22.970Z","content":"<h1 id=\"centos-&amp;-wordpress\">CentOS &amp; WordPress<a title=\"#centos-&amp;-wordpress\" href=\"#centos-&amp;-wordpress\"></a></h1>\n<h2 id=\"一、-登录云服务器\">一、 登录云服务器<a title=\"#一、-登录云服务器\" href=\"#一、-登录云服务器\"></a></h2>\n<p>在购买ECS服务器后，系统会创建一个ECS实例。每一个ECS实例对应一台已购买的云服务器。您可以通过电脑上自带的终端工具访问云服务器，进行应用部署和环境搭建。</p>\n<p>1、在ECS实例列表页面，选择实例的所属地域。</p>\n<p>2、找到目标实例，然后在操作列选择【更多】&gt; <strong>【<strong>密码/密钥】 &gt; 【重置实例密码</strong>】</strong>，然后在弹出的对话框设置ECS实例的登录密码。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1b79WKpP7gK0jSZFjXXc5aXXa-1301-587.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>3、 在弹出的页面，单击【立即重启】使新密码生效。</p>\n<p>4、在ECS实例列表页面，复制ECS实例的公网IP地址。</p>\n<p>5、打开电脑上的命令行终端工具。</p>\n<ul>\n<li>Windows：Powershell。</li>\n<li>MAC：Terminal。</li>\n</ul>\n<p>Windows用户请检查系统中是否安装有SSH工具。检查方法：</p>\n<p>a. 在终端中输入命令ssh -V。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -V</span><br></pre></td></tr></table></figure>\n<p>如果显示SSH版本则表示已安装，如下图所示。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1Oa9YKuT2gK0jSZFvXXXnFXXa-306-34.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>b. 如果未安装，请下载安装<a href=\"https://www.mls-software.com/files/setupssh-8.2p1-1.exe?spm=a2c6h.13858378.0.0.31035950NqmJWD&amp;file=setupssh-8.2p1-1.exe\" target=\"_blank\">OpenSSH</a>工具。</p>\n<p>6、在终端中输入连接命令ssh root@[ipaddress]。</p>\n<p>您需要将其中的 ipaddress 替换为您的ECS服务器的公网IP地址。例如。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh root@123.123.123.123</span><br></pre></td></tr></table></figure>\n<p>命令显示结果如下。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1zI1YKpT7gK0jSZFpXXaTkpXa-644-228.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>7、输入yes，然后输入云服务器的登录密码。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1NW9YKuT2gK0jSZFvXXXnFXXa-637-75.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>登录成功后会显示如下信息。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1XcWTKEz1gK0jSZLeXXb9kVXa-516-157.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"二、部署环境\">二、部署环境<a title=\"#二、部署环境\" href=\"#二、部署环境\"></a></h2>\n<p>本教程使用Apache作为后端服务器，并在云服务器上创建一个MySQL数据库用来存储数据。</p>\n<p>1、在ECS服务器上，执行以下命令，安装Apache服务及其扩展包。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install httpd httpd-manual mod_ssl mod_perl mod_auth_mysql</span><br></pre></td></tr></table></figure>\n<p>返回类似如下图结果则表示安装成功。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1fsfcRND1gK0jSZFsXXbldVXa-1050-137.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>2、执行以下命令，启动Apache服务。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start httpd.service</span><br></pre></td></tr></table></figure>\n<p>3、返回ECS控制台，在ECS实例列表页面，单击已创建的ECS实例ID链接进入ECS详情页。</p>\n<p>4、在左侧导航栏，单击本实例安全组，然后单击安全组的ID链接查看安全组配置。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1SGzhRUH1gK0jSZSyXXXtlpXa-820-356.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>5、打开浏览器输入ECS服务器的公网IP，如果显示如下图的测试页面表示Apache服务安装成功。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1_cKkdJTfau8jSZFwXXX1mVXa-1920-937.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>6、参考以下操作在ECS服务器上搭建一个MySQL数据库。</p>\n<p>a. 执行以下命令，下载并安装MySQL。</p>\n<p>说明 如果网络速度较慢，下载过程可能需要10分钟。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</span><br><span class=\"line\">yum -y install mysql57-community-release-el7-10.noarch.rpm</span><br><span class=\"line\">yum -y install mysql-community-server --nogpgcheck</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img.alicdn.com/tfs/TB1ka91h_M11u4jSZPxXXahcXXa-958-431.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>b. 执行以下命令，启动MySQL数据库。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl start mysqld.service</span><br></pre></td></tr></table></figure>\n<p>c. 执行以下命令，查看MySQL运行状态。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl status mysqld.service</span><br></pre></td></tr></table></figure>\n<p>d. 执行以下命令，查看MySQL初始密码。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">grep &quot;password&quot; /var/log/mysqld.log</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img.alicdn.com/tfs/TB16.uB0FY7gK0jSZKzXXaikpXa-948-62.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>e. 执行以下命令，登录数据库。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mysql -uroot -p</span><br></pre></td></tr></table></figure>\n<p>f. 执行以下命令，修改MySQL默认密码。</p>\n<p><strong>说明</strong></p>\n<ul>\n<li>您需要将下面命令中的NewPassWord1.修改为您要设置的数据库密码。</li>\n<li>新密码设置的时候如果设置的过于简单会报错，必须同时包含大小写英文字母、数字和特殊符号中的三类字符。</li>\n<li>注意每条完整的SQL命令结尾都有一个半角分号（;），如果多行命令中间没有分号分隔，这些命令将不会执行，直至遇到一个分号。</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;NewPassWord1.&#x27;;</span><br></pre></td></tr></table></figure>\n<p>g. 执行以下命令，创建一个存储博客网站内容的数据库。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">create database wordpress; </span><br></pre></td></tr></table></figure>\n<p>h. 执行以下命令，查看是否创建成功。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">show databases;</span><br></pre></td></tr></table></figure>\n<p>i. 输入exit退出数据库。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB12AGygmR26e4jSZFEXXbwuXXa-636-549.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>7、WordPress是使用PHP语言开发的博客平台。参考以下操作安装PHP。</p>\n<p>a. 执行以下命令，安装PHP。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install php php-mysql gd php-gd gd-devel php-xml php-common php-mbstring php-ldap php-pear php-xmlrpc php-imap</span><br></pre></td></tr></table></figure>\n<p>b. 执行以下命令，创建PHP测试页面。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">echo &quot;&lt;?php phpinfo(); ?&gt;&quot; &gt; /var/www/html/phpinfo.php</span><br></pre></td></tr></table></figure>\n<p>c. 执行以下命令，重启Apache服务。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart httpd</span><br></pre></td></tr></table></figure>\n<p>d. 打开浏览器，访问http://&lt;ECS公网IP&gt;/phpinfo.php，显示如下页面表示PHP安装成功。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1yVFVRHY1gK0jSZTEXXXDQVXa-601-840.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"三、安装和配置wordpress\">三、安装和配置WordPress<a title=\"#三、安装和配置wordpress\" href=\"#三、安装和配置wordpress\"></a></h2>\n<p>*0、安装WordPress时报错如下。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Loaded plugins: fastestmirror</span><br><span class=\"line\">Loading mirror speeds from cached hostfile</span><br><span class=\"line\"> * base: mirror.net.cen.ct.gov</span><br><span class=\"line\"> * extras: centos.mirror.constant.com</span><br><span class=\"line\"> * updates: us.mirrors.virtono.com</span><br><span class=\"line\">No package wordpress available.</span><br><span class=\"line\">Error: Nothing to do</span><br></pre></td></tr></table></figure>\n<p><strong>解决方法</strong>：安装epel-release</p>\n<p>只需要从企业版Linux库配置包中安装扩展包即可。具体方法如下</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install epel-release</span><br></pre></td></tr></table></figure>\n<p>epel安装完成之后，再重新安装WordPress即可。</p>\n<hr>\n<p>完成上述环境搭建后，参考以下操作安装WordPress。</p>\n<p>1、执行以下命令，安装WordPress。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install wordpress</span><br></pre></td></tr></table></figure>\n<p>显示如下信息表示安装成功。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1qDq.fPMZ7e4jSZFOXXX7epXa-1042-156.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>2、修改WordPress配置文件。</p>\n<p>a. 执行以下命令，修改wp-config.php指向路径为绝对路径。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 进入/usr/share/wordpress目录。</span><br><span class=\"line\">cd /usr/share/wordpress</span><br><span class=\"line\"># 修改路径。</span><br><span class=\"line\">ln -snf /etc/wordpress/wp-config.php wp-config.php</span><br><span class=\"line\"># 查看修改后的目录结构。</span><br><span class=\"line\">ll</span><br></pre></td></tr></table></figure>\n<p>b. 执行以下命令，移动WordPress到Apache根目录。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 在Apache的根目录/var/www/html下，创建一个wp-blog文件夹。</span><br><span class=\"line\">mkdir /var/www/html/wp-blog</span><br><span class=\"line\">mv * /var/www/html/wp-blog/</span><br></pre></td></tr></table></figure>\n<p>c. 执行以下命令，修改wp-config.php配置文件。</p>\n<ul>\n<li>database_name_here为之前步骤中创建的数据库名称，本示例为wordpress。</li>\n<li>username_here为MySQL数据库的用户名，本示例为root。</li>\n<li>password_here为MySQL数据库的登录密码，本示例为NewPassWord1.。</li>\n</ul>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed -i &#x27;s/database_name_here/wordpress/&#x27; /var/www/html/wp-blog/wp-config.php</span><br><span class=\"line\">sed -i &#x27;s/username_here/root/&#x27; /var/www/html/wp-blog/wp-config.php</span><br><span class=\"line\">sed -i &#x27;s/password_here/NewPassWord1./&#x27; /var/www/html/wp-blog/wp-config.php</span><br></pre></td></tr></table></figure>\n<p>d. 执行以下命令，查看配置文件信息是否修改成功。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat -n /var/www/html/wp-blog/wp-config.php</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://img.alicdn.com/tfs/TB1MLz1dcieb18jSZFvXXaI3FXa-913-631.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>3、执行以下命令，重启Apache服务。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart httpd</span><br></pre></td></tr></table></figure>\n<h2 id=\"四、发布博客\">四、发布博客<a title=\"#四、发布博客\" href=\"#四、发布博客\"></a></h2>\n<p>完成WordPress安装后，参考以下操作创建个人站点并发布内容。</p>\n<p>1、打开浏览器并访问http://&lt;ECS公网IP&gt;/wp-blog/wp-admin/install.php。</p>\n<p>2、设置您的站点名称、管理员用户名和密码，然后单击Install WordPress完成WordPress初始化。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1jcj2bIVl614jSZKPXXaGjpXa-723-689.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>3、单击 Log In ，输入用户名和密码，然后再次单击Log In打开WordPress站点。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1ohA4Nxz1gK0jSZSgXXavwpXa-704-862.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>登录后，您就可以根据需要创建内容进行发布了。至此您已完成WordPress的搭建。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB14yTbpcKfxu4jSZPfXXb3dXXa-939-420.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>4、您可以单击Write your first blog post，开始编写您的第一篇博客。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1qX_oRQT2gK0jSZFkXXcIQFXa-1920-937.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>5、编写完成您的第一篇博客后，单击publish发布。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB17SK.RQL0gK0jSZFtXXXQCXXa-1920-937.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>6、在左侧导航栏，单击All Posts查看已发布的帖子。</p>\n<p><img src=\"https://img.alicdn.com/tfs/TB1iV_oRQT2gK0jSZFkXXcIQFXa-1920-937.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"五、wordpress汉化\">五、Wordpress汉化<a title=\"#五、wordpress汉化\" href=\"#五、wordpress汉化\"></a></h2>\n<p>1、进入WordPress官方中文网站：<a href=\"https://cn.wordpress.org/\" target=\"_blank\">https://cn.wordpress.org/</a></p>\n<p>2、点击【获取WordPress】</p>\n<p><img src=\"CentOS%20&amp;%20WordPress.assets/image-20230404204904434.png\" alt=\"image-20230404204904434\" loading=\"lazy\" class=\"φbp\"></p>\n<p>3、下拉点击【下载.tar.gz】，下载中文版WordPress压缩包并解压。</p>\n<p><img src=\"CentOS%20&amp;%20WordPress.assets/image-20230404205123806.png\" alt=\"image-20230404205123806\" loading=\"lazy\" class=\"φbp\"></p>\n<p>4、用SFTP工具连接到云服务器，将刚才解压的文件夹中的 wordpress/wp-content/languages 复制到服务器的 /var/www/html/wp-blog/wp-content 中。</p>\n<p><img src=\"CentOS%20&amp;%20WordPress.assets/image-20230404211611148.png\" alt=\"image-20230404211611148\" loading=\"lazy\" class=\"φbp\"></p>\n<p>5、执行以下命令，重启Apache服务。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">systemctl restart httpd</span><br></pre></td></tr></table></figure>\n<p>6、进入WordPress管理台，找到【Setting】&gt;【General】&gt;【Site Language】，改为简体中文并保存。</p>\n<p><img src=\"CentOS%20&amp;%20WordPress.assets/image-20230404212116421.png\" alt=\"image-20230404212116421\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"Hugo & GithubPages.md","link":"posts/hugo"},"next":{"title":"测试文件下载","link":"posts/test_file_download"},"plink":"https://hs-zhangsan.github.io/posts/centos&wordpress/","toc":[{"id":"centos-&-wordpress","title":"CentOS &amp; WordPress","index":"1","children":[{"id":"一、-登录云服务器","title":"一、 登录云服务器","index":"1.1"},{"id":"二、部署环境","title":"二、部署环境","index":"1.2"},{"id":"三、安装和配置wordpress","title":"三、安装和配置WordPress","index":"1.3"},{"id":"四、发布博客","title":"四、发布博客","index":"1.4"},{"id":"五、wordpress汉化","title":"五、Wordpress汉化","index":"1.5"}]}],"reward":true,"copyright":{"published":"April 6, 2023","updated":"April 6, 2023","author":"zhangsan","link":"<a href=\"https://hs-zhangsan.github.io/posts/centos&wordpress/\" title=\"CentOS & WordPress\">https://hs-zhangsan.github.io/posts/centos&wordpress/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"},"reading_time":"2037 words in 14 min"}